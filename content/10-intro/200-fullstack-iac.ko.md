---
title: 쿠버네티스 클러스터를 풀스택으로 IaC 한다는 것
weight: 200
pre: "<b>1-1. </b>"
---

클라우드에서 인프라를 코드로 정의하는 것(Infrastructure as Code, 이하 IaC)은 선택이 아닌 필수입니다.  
여러분이 쿠버네티스 클러스터를 클라우드에 배포할 때 신경써야 하는 코드는 크게 세 가지 종류가 있을 것입니다.  

![](/images/10-intro/layers-of-iac.svg)

#### Infrastructure
AWS 클라우드 상에 하나의 EKS 클러스터를 배포할 때에, 여기에는 VPC 설정, 그 안의 서브넷, 보안그룹, 각종 IAM Role과 정책 등등 여러가지 설정이 동반됩니다. 리전 확장, 계정 확장 등으로 사용 규모가 확대될 수록 인프라 정의 코드는 복잡해지게 됩니다.

#### Platform
이렇게 관련 인프라를 코드로 정의하고 나면, 그 위에 클러스터 차원에서 관리해주어야 하는 자원들이 있습니다.  
예를 들어, 네임스페이스를 구분하고 이에 대해 [ResourceQuota](https://kubernetes.io/docs/concepts/policy/resource-quotas/)를 지정하거나 오토스케일링, 모니터링, 로깅 설정을 하는 것 등등이 있을 수 있겠죠. 

#### Application
조직에 따라 누가 하는지는 다를 수 있지만, 어플리케이션 레이어에서도 1) 배포 스크립트와 2) k8s manifest 역시 코드로써 같이 관리되어야 합니다.


## 전체 스택에 대한 IaC가 왜 필요할까요?

1. 전부 모델링
모든 리소스를 단일 소스로 관리하여, 조직 전체에서 사용되는 구성 요소들을 표준화할 수 있습니다.  
이를 통해 전사 구성 규정을 준수하고 이슈 발생시 더 빠르게 대처할 수 있습니다.

2. 자동화 및 배포
애플리케이션 리소스를 안전하고 반복 가능한 방식으로 프로비저닝하므로, 수작업을 수행하거나 사용자 지정 스크립트를 작성할 필요 없이 인프라와 애플리케이션을 구축 및 재구축할 수 있습니다.  
이를 통해 휴먼 에러의 감소 역시 기대할 수 있습니다.

3. 코드처럼 버전 관리
인프라를 코드화하면 인프라를 단순한 코드로 취급할 수 있습니다. 인프라를 원하는 코드 에디터로 작성하고, 버전 제어 시스템에 체크인하고, 프로덕션에 배포하기 전에 팀원들과 파일을 검토할 수 있습니다.
각 코드의 버젼이 인프라의 상태를 나타내게 되고, 변경 후 이슈가 발생될 시 이전 코드를 사용하여 이전 버전의 인프라로 빠른 원복이 가능합니다.


## 이 워크샵에서는
이 워크샵은, 위 세 개의 주요 레이어를 아래와 같이 다룰 예정입니다.

1. Infrastructure

    * [실습 1의 클러스터 생성 부분](/ko/40-deploy-clusters/200-cluster/)에서 EKS 클러스터 및 기반 IAM, 네트워크 설정을 수행합니다.
    * [실습 3에서의 어플리케이션 배포 파이프라인](/ko/60-deploy-app/200-single-region/)에서는, 실습 1과 실습 2에서 생성한 인프라에 어플리케이션 코드를 배포하는 CI/CD 인프라를 정의합니다.

2. Platform


    [실습 1의 컨테이너 생성 부분](/ko/40-deploy-clusters/300-container/)에서 플랫폼 레이어의 자원을 생성합니다.  
    이 실습에서 생성할 컨테이너 자원은, [인프라와 라이프사이클을 유사하게 가져가는 것이 권장](/ko/80-appendix/related-bps/full-stack-deployment/)됨을 고려하여 Namespace를 생성하고 이 Namespace에서 사용할 수 있는 자원량을 제한하는 ResourceQuota를 생성하도록 할 것입니다.

3. Application

    [실습 3에서는 샘플 어플리케이션](/ko/60-deploy-app/100-clone-sample-app/)을 클론하여 실습 1과 실습 2에서 생성한 인프라에 배포합니다. 실제로 이 어플리케이션 레이어 코드를 작성하는 부분이 워크샵에 포함되어 있지는 않지만, 클론하는 코드를 상세히 살펴보실 것을 권고드립니다.